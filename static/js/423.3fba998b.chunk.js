"use strict";(self.webpackChunkkamas=self.webpackChunkkamas||[]).push([[423],{2423:function(e,s,n){n.r(s),n.d(s,{default:function(){return j}});var a=n(2791),t=n(364),r=n(216),c=n(5850),l=n(3498),u=function(e){return e.chat.messages},i=function(e){return e.chat.connectStatus},o=function(e){return e.chat.isFetching},g=n(1212),d=n(885),m={wrapper:"InputMessages_wrapper__QV6Sl",textarea:"InputMessages_textarea__-z9A1",warning:"InputMessages_warning__MEW+F"},h=n(184),p=function(e){var s=e.handleSendMessage,n=e.connectStatus,t=(0,a.useState)(""),r=(0,d.Z)(t,2),c=r[0],l=r[1],u=function(){s(c),l("")},i=function(e){e.ctrlKey&&"Enter"===e.code&&0!==c.length&&u()};return(0,a.useEffect)((function(){var e=document.getElementById("textarea");return e.addEventListener("keydown",i),function(){return e.removeEventListener("keydown",i)}}),[c]),(0,h.jsxs)("div",{className:m.wrapper,children:[(0,h.jsx)("textarea",{value:c,onChange:function(e){return l(e.target.value)},className:m.textarea,placeholder:"\u041d\u0430\u0447\u043d\u0438 \u043f\u0438\u0441\u0430\u0442\u044c...",id:"textarea"}),(0,h.jsx)("button",{disabled:"connecting"===n||0===c.length||c.length>100,onClick:u,className:m.button,children:"connecting"===n?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":0===c.length?"\u041f\u0443\u0441\u0442\u043e":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),c.length>100&&(0,h.jsx)("div",{className:m.warning,children:"\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432!"})]})},f=n(3504),x=n(4353),_={messages:"Messages_messages__rACvG",wrapper:"Messages_wrapper__7zJaQ",photo:"Messages_photo__FXBKR",name:"Messages_name__ciu+K",message:"Messages_message__CNk5T",plug:"Messages_plug__Kj8Tl"},v=function(e){var s=e.messages,n=(0,a.useRef)(null);return(0,a.useEffect)((function(){!function(){var e=document.getElementById("scrolledDiv");e.scrollTo({top:e.scrollHeight})}()}),[s]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:_.messages,id:"scrolledDiv",children:[null!==s&&0!==s.length?s.map((function(e,s){return(0,h.jsxs)("div",{className:_.wrapper,children:[(0,h.jsx)("div",{className:_.photoWrapper,children:(0,h.jsx)(f.rU,{to:"/users/"+e.userId,children:e.photo?(0,h.jsx)("img",{src:e.photo,alt:e.userName,className:_.photo}):(0,h.jsx)("img",{src:x,alt:e.userName,className:_.photo})})}),(0,h.jsxs)("div",{className:_.messageWrapper,children:[(0,h.jsx)("p",{className:_.name,children:e.userName}),(0,h.jsx)("p",{className:_.message,children:e.message})]})]},s)})):(0,h.jsx)("p",{className:_.plug,children:"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}),(0,h.jsx)("div",{ref:n})," "]})})},j=function(){var e=(0,t.v9)(u),s=(0,t.v9)(l.ru),n=(0,t.v9)(o),d=(0,t.v9)(i),m=(0,t.I0)();return(0,a.useEffect)((function(){return m((0,c.hb)()),function(){m((0,c.kb)())}}),[m]),s?(0,h.jsxs)(h.Fragment,{children:[n?(0,h.jsx)(r.p,{}):(0,h.jsx)(v,{messages:e}),s&&(0,h.jsx)(p,{handleSendMessage:function(e){m((0,c.bG)(e))},connectStatus:d})]}):(0,h.jsx)(g.m,{})}}}]);
//# sourceMappingURL=423.3fba998b.chunk.js.map